spring.application.name=event-management-system

# ===============================
# DATABASE CONFIGURATION (Production - AWS RDS)
# ===============================
# Support both AWS RDS format and Railway DATABASE_URL format
spring.datasource.url=${DATABASE_URL:jdbc:postgresql://${DB_HOST:localhost}:${DB_PORT:5432}/${DB_NAME:eventdb}}
spring.datasource.username=${DATABASE_USERNAME:${DB_USERNAME:postgres}}
spring.datasource.password=${DATABASE_PASSWORD:${DB_PASSWORD}}

# JDBC driver
spring.datasource.driver-class-name=org.postgresql.Driver

# Connection pool settings for production
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000

# ===============================
# JPA / HIBERNATE SETTINGS
# ===============================
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect
# Use 'validate' or 'none' in production, never 'update' or 'create-drop'
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=false

# ===============================
# JWT CONFIGURATION
# ===============================
# IMPORTANT: Override this with a secure value in Railway environment variables
app.jwt.secret=${JWT_SECRET}
app.jwt.expiration-ms=${JWT_EXPIRATION_MS:3600000}

# ===============================
# EMAIL CONFIGURATION (SendGrid Web API)
# ===============================
# Using SendGrid HTTP API instead of SMTP (Render free tier blocks SMTP ports)
sendgrid.api.key=${SENDGRID_API_KEY}
sendgrid.from.email=${SENDGRID_FROM_EMAIL:noreply@eventmanagement.com}
sendgrid.from.name=${SENDGRID_FROM_NAME:Event Management System}

# SMTP fallback (for local development or paid plans with SMTP access)
spring.mail.host=${MAIL_HOST:smtp.sendgrid.net}
spring.mail.port=${MAIL_PORT:587}
spring.mail.username=${MAIL_USERNAME:apikey}
spring.mail.password=${MAIL_PASSWORD:dummy}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.starttls.required=true

# Application settings
app.name=Event Management System

# ===============================
# SERVER CONFIGURATION
# ===============================
# Support both AWS (SERVER_PORT) and Railway (PORT) format
server.port=${SERVER_PORT:${PORT:8080}}
server.compression.enabled=true
server.compression.mime-types=text/html,text/xml,text/plain,text/css,application/javascript,application/json

# ===============================
# LOGGING
# ===============================
logging.level.root=INFO
logging.level.com.taingy.eventmanagementsystem=INFO
logging.level.org.springframework.web=INFO
logging.level.org.hibernate.SQL=WARN

# ===============================
# ACTUATOR (Health Checks)
# ===============================
management.endpoints.web.exposure.include=health,info
management.endpoint.health.show-details=when-authorized
